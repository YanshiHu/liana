<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Wrapper function to run `cell2cell_tensor` with LIANA output."><title>Wrapper function to run `cell2cell_tensor` with LIANA output. — liana_tensor_c2c • liana</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Wrapper function to run `cell2cell_tensor` with LIANA output. — liana_tensor_c2c"><meta property="og:description" content="Wrapper function to run `cell2cell_tensor` with LIANA output."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">liana</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/liana_cc2tensor.html">Context Factorisation with tensor-cell2cell</a>
    <a class="dropdown-item" href="../articles/liana_custom_op.html">LIANA Custom literature and database knowledge from OmniPath</a>
    <a class="dropdown-item" href="../articles/liana_devel.html">LIANA++ for Benchmarks and Developers</a>
    <a class="dropdown-item" href="../articles/liana_nichenet.html">LIANA - NicheNet</a>
    <a class="dropdown-item" href="../articles/liana_ortho.html"> LIANA Orthology Conversion</a>
    <a class="dropdown-item" href="../articles/liana_tutorial.html">LIANA Tutorial</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/saezlab/liana/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/saezlab">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://saezlab.org/">
    <span class="fas fa fas fa-university"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Wrapper function to run `cell2cell_tensor` with LIANA output.</h1>
      <small class="dont-index">Source: <a href="https://github.com/saezlab/liana/blob/HEAD/R/liana_tensor.R" class="external-link"><code>R/liana_tensor.R</code></a></small>
      <div class="d-none name"><code>liana_tensor_c2c.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Wrapper function to run `cell2cell_tensor` with LIANA output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">liana_tensor_c2c</span><span class="op">(</span></span>
<span>  sce <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  context_df_dict <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  score_col <span class="op">=</span> <span class="st">"LRscore"</span>,</span>
<span>  how <span class="op">=</span> <span class="st">"inner"</span>,</span>
<span>  lr_fill <span class="op">=</span> <span class="cn">NaN</span>,</span>
<span>  cell_fill <span class="op">=</span> <span class="cn">NaN</span>,</span>
<span>  lr_sep <span class="op">=</span> <span class="st">"^"</span>,</span>
<span>  context_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_elements <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  device <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rank <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1337</span>,</span>
<span>  upper_rank <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  runs <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  init <span class="op">=</span> <span class="st">"svd"</span>,</span>
<span>  build_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  factors_only <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conda_env <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_available <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  inplace <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sender_col <span class="op">=</span> <span class="st">"source"</span>,</span>
<span>  receiver_col <span class="op">=</span> <span class="st">"target"</span>,</span>
<span>  ligand_col <span class="op">=</span> <span class="st">"ligand.complex"</span>,</span>
<span>  receptor_col <span class="op">=</span> <span class="st">"receptor.complex"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>sce</dt>
<dd><p>SingleCellExperiment with `context_df_dict` - i.e. liana results
per context (sample) stored at `sce@metadata$liana_res`</p></dd>


<dt>context_df_dict</dt>
<dd><p>Dictionary (named list) containing a dataframe for
each context. The dataframe must contain columns containing sender (source) cells,
receiver (target) cells, ligands, receptors, and communication scores, separately.
Keys are context names and values are dataframes. NULL by default.
If not NULL will be used instead of `sce@metadata$liana_res`.</p></dd>


<dt>score_col</dt>
<dd><p>Name of the column containing the communication scores in
all context dataframes.</p></dd>


<dt>how</dt>
<dd><p>Approach to consider cell types and genes present across multiple contexts.
- 'inner' : Considers only cell types and LR pairs that are present in all contexts (intersection).
- 'outer' : Considers all cell types and LR pairs that are present across contexts (union).
- 'outer_lr' : Considers only cell types that are present in all contexts (intersection),
 while all LR pairs that are present across contexts (union).
- 'outer_cells' : Considers only LR pairs that are present in all contexts (intersection),
 while all cell types that are present across contexts (union).</p></dd>


<dt>lr_fill</dt>
<dd><p>Value to fill communication scores when a ligand-receptor
pair is not present across all contexts. (NaN by default)</p></dd>


<dt>cell_fill</dt>
<dd><p>Value to fill communication scores when a cell is not
present across all ligand-receptor pairs or all contexts. (NaN by default)</p></dd>


<dt>lr_sep</dt>
<dd><p>Separation character to join ligands and receptors into a
LR pair name. ('^' by Default)</p></dd>


<dt>context_order</dt>
<dd><p>List used to sort the contexts when building the tensor.
Elements must be all elements in `names(context_df_dict)`. (NULL by default)</p></dd>


<dt>sort_elements</dt>
<dd><p>Whether alphabetically sorting elements in the
InteractionTensor. The Context Dimension is not sorted if a
'context_order' list is provided. (TRUE by default).</p></dd>


<dt>device</dt>
<dd><p>Device to use when backend is pytorch.
Options are: ['cpu', 'cuda:0', None]. NULL by Default</p></dd>


<dt>rank</dt>
<dd><p>Ranks for the Tensor Factorization (number of factors to deconvolve the original tensor).
If NULL, then rank selection is performed using the `elbow_rank_selection` function.</p></dd>


<dt>seed</dt>
<dd><p>Random seed integer</p></dd>


<dt>upper_rank</dt>
<dd><p>Upper bound of ranks to explore with the elbow analysis.</p></dd>


<dt>runs</dt>
<dd><p>Number of tensor factorization performed for a given rank.
Each factorization varies in the seed of initialization. Consider increasing
the number of runs, in order to obtain a more robust rank estimate.</p></dd>


<dt>init</dt>
<dd><p>Initialization method for computing the Tensor Factorization.
‘svd’, ‘random’</p></dd>


<dt>build_only</dt>
<dd><p>Whether to only return a tensor instance, without rank
selection and no factorization.</p></dd>


<dt>factors_only</dt>
<dd><p>whether to return only the factors after factorization</p></dd>


<dt>conda_env</dt>
<dd><p>name of existing conda environment</p></dd>


<dt>use_available</dt>
<dd><p>whether to use c2c if available in current env.
False by default.</p></dd>


<dt>verbose</dt>
<dd><p>verbosity logical</p></dd>


<dt>inplace</dt>
<dd><p>logical (TRUE by default) if liana results are to be saved
to the SingleCellExperiment object (`sce@metadata$liana_res`)</p></dd>


<dt>sender_col</dt>
<dd><p>Name of the column containing the sender cells in all context
dataframes.</p></dd>


<dt>receiver_col</dt>
<dd><p>Name of the column containing the receiver cells in all context
dataframes.</p></dd>


<dt>ligand_col</dt>
<dd><p>Name of the column containing the ligands in all context
dataframes.</p></dd>


<dt>receptor_col</dt>
<dd><p>Name of the column containing the receptors in all context
dataframes.</p></dd>


<dt>...</dt>
<dd><p>Dictionary containing keyword arguments for the c2c.compute_tensor_factorization function.
The function deals with `random_state` (seed) and `rank` internally.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>an instance of the cell2cell.tensor.BaseTensor class (via reticulate).
If build_only is TRUE, then no rank selection or tensor decomposition is returned.
Otherwise, returns a tensor with factorization results.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function servers as a one-liner wrapper to the tensor factorisation
method described in <a href="https://www.nature.com/articles/s41467-022-31369-2" class="external-link">tensor_cell2cell</a>.
We refer the user to the publication and <a href="https://earmingol.github.io/cell2cell/tutorials/ASD/01-Tensor-Factorization-ASD/" class="external-link">tensor_cell2cell tutorial page</a>
made by the authors. Logically, one should cite cell2cell's paper if their
method was used via LIANA.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Daniel Dimitrov, Charlotte Boys, Martin Garrido Rodríguez, Denes Turei, James Nagai.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

