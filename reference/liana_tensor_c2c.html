<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Wrapper function to run `cell2cell_tensor` with LIANA output. — liana_tensor_c2c • liana</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Wrapper function to run `cell2cell_tensor` with LIANA output. — liana_tensor_c2c"><meta property="og:description" content="Wrapper function to run `cell2cell_tensor` with LIANA output."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">liana</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/liana_cc2tensor.html">Context Factorisation with tensor-cell2cell</a>
    </li>
    <li>
      <a href="../articles/liana_custom_op.html">LIANA Custom literature and database knowledge from OmniPath</a>
    </li>
    <li>
      <a href="../articles/liana_devel.html">LIANA++ for Benchmarks and Developers</a>
    </li>
    <li>
      <a href="../articles/liana_nichenet.html">LIANA - NicheNet</a>
    </li>
    <li>
      <a href="../articles/liana_ortho.html"> LIANA Orthology Conversion</a>
    </li>
    <li>
      <a href="../articles/liana_tutorial.html">LIANA Tutorial</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/saezlab/liana/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/saezlab" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://www.saezlab.org" class="external-link">
    <span class="fas fa-university"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Wrapper function to run `cell2cell_tensor` with LIANA output.</h1>
    <small class="dont-index">Source: <a href="https://github.com/saezlab/liana/blob/HEAD/R/liana_tensor.R" class="external-link"><code>R/liana_tensor.R</code></a></small>
    <div class="hidden name"><code>liana_tensor_c2c.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Wrapper function to run `cell2cell_tensor` with LIANA output.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">liana_tensor_c2c</span><span class="op">(</span></span>
<span>  sce <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  context_df_dict <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  score_col <span class="op">=</span> <span class="st">"LRscore"</span>,</span>
<span>  how <span class="op">=</span> <span class="st">"inner"</span>,</span>
<span>  lr_fill <span class="op">=</span> <span class="cn">NaN</span>,</span>
<span>  cell_fill <span class="op">=</span> <span class="cn">NaN</span>,</span>
<span>  lr_sep <span class="op">=</span> <span class="st">"^"</span>,</span>
<span>  context_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort_elements <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  device <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rank <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1337</span>,</span>
<span>  upper_rank <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  runs <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  init <span class="op">=</span> <span class="st">"svd"</span>,</span>
<span>  build_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  factors_only <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conda_env <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  inplace <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sender_col <span class="op">=</span> <span class="st">"source"</span>,</span>
<span>  receiver_col <span class="op">=</span> <span class="st">"target"</span>,</span>
<span>  ligand_col <span class="op">=</span> <span class="st">"ligand.complex"</span>,</span>
<span>  receptor_col <span class="op">=</span> <span class="st">"receptor.complex"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sce</dt>
<dd><p>SingleCellExperiment with `context_df_dict` - i.e. liana results
per context (sample) stored at `sce@metadata$liana_res`</p></dd>


<dt>context_df_dict</dt>
<dd><p>Dictionary (named list) containing a dataframe for
each context. The dataframe must contain columns containing sender (source) cells,
receiver (target) cells, ligands, receptors, and communication scores, separately.
Keys are context names and values are dataframes. NULL by default.
If not NULL will be used instead of `sce@metadata$liana_res`.</p></dd>


<dt>score_col</dt>
<dd><p>Name of the column containing the communication scores in
all context dataframes.</p></dd>


<dt>how</dt>
<dd><p>Approach to consider cell types and genes present across multiple contexts.
- 'inner' : Considers only cell types and LR pairs that are present in all contexts (intersection).
- 'outer' : Considers all cell types and LR pairs that are present across contexts (union).
- 'outer_lr' : Considers only cell types that are present in all contexts (intersection),
 while all LR pairs that are present across contexts (union).
- 'outer_cells' : Considers only LR pairs that are present in all contexts (intersection),
 while all cell types that are present across contexts (union).</p></dd>


<dt>lr_fill</dt>
<dd><p>Value to fill communication scores when a ligand-receptor
pair is not present across all contexts. (NaN by default)</p></dd>


<dt>cell_fill</dt>
<dd><p>Value to fill communication scores when a cell is not
present across all ligand-receptor pairs or all contexts. (NaN by default)</p></dd>


<dt>lr_sep</dt>
<dd><p>Separation character to join ligands and receptors into a
LR pair name. ('^' by Default)</p></dd>


<dt>context_order</dt>
<dd><p>List used to sort the contexts when building the tensor.
Elements must be all elements in `names(context_df_dict)`. (NULL by default)</p></dd>


<dt>sort_elements</dt>
<dd><p>Whether alphabetically sorting elements in the
InteractionTensor. The Context Dimension is not sorted if a
'context_order' list is provided. (TRUE by default).</p></dd>


<dt>device</dt>
<dd><p>Device to use when backend is pytorch.
Options are: ['cpu', 'cuda:0', None]. NULL by Default</p></dd>


<dt>rank</dt>
<dd><p>Ranks for the Tensor Factorization (number of factors to deconvolve the original tensor).
If NULL, then rank selection is performed using the `elbow_rank_selection` function.</p></dd>


<dt>seed</dt>
<dd><p>Random seed integer</p></dd>


<dt>upper_rank</dt>
<dd><p>Upper bound of ranks to explore with the elbow analysis.</p></dd>


<dt>runs</dt>
<dd><p>Number of tensor factorization performed for a given rank.
Each factorization varies in the seed of initialization.</p></dd>


<dt>init</dt>
<dd><p>Initialization method for computing the Tensor Factorization.
‘svd’, ‘random’</p></dd>


<dt>build_only</dt>
<dd><p>Whether to only return a tensor instance, without rank
selection and no factorization.</p></dd>


<dt>factors_only</dt>
<dd><p>whether to return only the factors after factorization</p></dd>


<dt>verbose</dt>
<dd><p>verbosity logical</p></dd>


<dt>inplace</dt>
<dd><p>logical (TRUE by default) if liana results are to be saved
to the SingleCellExperiment object (`sce@metadata$liana_res`)</p></dd>


<dt>sender_col</dt>
<dd><p>Name of the column containing the sender cells in all context
dataframes.</p></dd>


<dt>receiver_col</dt>
<dd><p>Name of the column containing the receiver cells in all context
dataframes.</p></dd>


<dt>ligand_col</dt>
<dd><p>Name of the column containing the ligands in all context
dataframes.</p></dd>


<dt>receptor_col</dt>
<dd><p>Name of the column containing the receptors in all context
dataframes.</p></dd>


<dt>...</dt>
<dd><p>Dictionary containing keyword arguments for the c2c.compute_tensor_factorization function.
The function deals with `random_state` (seed) and `rank` internally.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>an instance of the cell2cell.tensor.BaseTensor class (via reticulate).
If build_only is TRUE, then no rank selection or tensor decomposition is returned.
Otherwise, returns a tensor with factorization results.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function servers as a one-liner wrapper to the tensor factorisation
method described in <a href="https://www.nature.com/articles/s41467-022-31369-2" class="external-link">tensor_cell2cell</a>.
We refer the user to the publication and <a href="https://earmingol.github.io/cell2cell/tutorials/ASD/01-Tensor-Factorization-ASD/" class="external-link">tensor_cell2cell tutorial page</a>
made by the authors. Logically, one should cite cell2cell's paper if their
method was used via LIANA.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Daniel Dimitrov, Charlotte Boys, Martin Garrido Rodríguez, Denes Turei, James Nagai.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

