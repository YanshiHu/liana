<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Aggregate CCC Method results and by both magnitude and specificity ranks"><title>Aggregate CCC Method results and by both magnitude and specificity ranks — rank_aggregate • liana</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Aggregate CCC Method results and by both magnitude and specificity ranks — rank_aggregate"><meta property="og:description" content="Aggregate CCC Method results and by both magnitude and specificity ranks"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">liana</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/liana_cc2tensor.html">Context Factorisation with tensor-cell2cell</a>
    <a class="dropdown-item" href="../articles/liana_custom_op.html">LIANA Custom literature and database knowledge from OmniPath</a>
    <a class="dropdown-item" href="../articles/liana_devel.html">LIANA++ for Benchmarks and Developers</a>
    <a class="dropdown-item" href="../articles/liana_nichenet.html">LIANA - NicheNet</a>
    <a class="dropdown-item" href="../articles/liana_ortho.html"> LIANA Orthology Conversion</a>
    <a class="dropdown-item" href="../articles/liana_tutorial.html">LIANA Tutorial</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/saezlab/liana/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/saezlab">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://saezlab.org/">
    <span class="fas fa fas fa-university"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Aggregate CCC Method results and by both magnitude and specificity ranks</h1>
      <small class="dont-index">Source: <a href="https://github.com/saezlab/liana/blob/HEAD/R/liana_aggregate.R" class="external-link"><code>R/liana_aggregate.R</code></a></small>
      <div class="d-none name"><code>rank_aggregate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Aggregate CCC Method results and by both magnitude and specificity ranks</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rank_aggregate</span><span class="op">(</span><span class="va">liana_res</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>liana_res</dt>
<dd><p>LIANA results</p></dd>


<dt>...</dt>
<dd><p>Arguments passed on to <code><a href="liana_aggregate.html">liana_aggregate</a></code></p><dl><dt><code>aggregate_how</code></dt>
<dd><p>way to aggregate, by default (NULL) will aggregate
all passed methods with the approach specified in `liana:::.score_specs`.
Alternative options are `magnitude` and `specificity`.</p></dd>

    <dt><code>set_cap</code></dt>
<dd><p>Function used to set ranked cap (i.e. the value that is
assigned to interactions with NA for scores);
By default, this is set to "max", which is the maximum number of interactions
obtained by the methods; Some methods return all possible ligand-receptor
combinations for each possible source and target cell pair - i.e. the
known universe of all possible interactions (based on the CCC resource)</p></dd>

    <dt><code>resource</code></dt>
<dd><p>If methods are ran with multiple resources, the name of the
resource of interest needs to be provided
*Note* if a name is not provided, the first results based on the first
resource in the list will be returned</p></dd>

    <dt><code>cap</code></dt>
<dd><p>A cap can for all methods can also be manually set, then the top X
interactions, based on the `specificity` scores for each method will be
returned and the ranking will be carried out solely on them</p></dd>

    <dt><code>get_ranks</code></dt>
<dd><p>boolean, whether to return consensus ranks for methods</p></dd>

    <dt><code>get_agrank</code></dt>
<dd><p>boolean, whether to return aggregate rank using the
`RobustRankAggreg` package.</p></dd>

    <dt><code>.score_mode</code></dt>
<dd><p>defines the way that the methods would be aggragate.
By default, we use the score of each method which reflects specificity
(if available), if not e.g. the case of SCA we use it's sole scoring function.
This aggregation is by default done on the basis of the list returns by
`.score_mode`. Alternatively, one could pass `.score_housekeep` to obtain an
aggragate of the housekeeping interactions of each method.</p></dd>

    <dt><code>join_cols</code></dt>
<dd><p>columns by which different method results will be joined.
NULL by default, and automatically will handle the columns depending on the
methods used.</p></dd>

  
</dl></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">liana_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"liana"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># load testdata</span></span></span>
<span class="r-in"><span><span class="va">testdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">liana_path</span> , <span class="st">"testdata"</span>, <span class="st">"input"</span>, <span class="st">"testdata.rds"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># run liana</span></span></span>
<span class="r-in"><span><span class="va">liana_res</span> <span class="op">&lt;-</span> <span class="fu"><a href="liana_wrap.html">liana_wrap</a></span><span class="op">(</span><span class="va">testdata</span>, method<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sca"</span>, <span class="st">"natmi"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Expression from the `RNA` assay will be used</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Running LIANA with `seurat_annotations` as labels!</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>3465 genes and/or 0 cells were removed as they had no counts!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> LIANA: LR summary stats calculated!</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Now Running: Sca</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Now Running: Natmi</span>
<span class="r-in"><span><span class="co"># aggregate results from multiple methods</span></span></span>
<span class="r-in"><span><span class="va">liana_res</span> <span class="op">&lt;-</span> <span class="fu">rank_aggregate</span><span class="op">(</span><span class="va">liana_res</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Now aggregating sca</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Now aggregating natmi</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Aggregating Ranks</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Unknown method name or missing specifics for: sca</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Now aggregating natmi</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Aggregating Ranks</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Daniel Dimitrov, Charlotte Boys, Martin Garrido Rodríguez, Denes Turei, James Nagai.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

